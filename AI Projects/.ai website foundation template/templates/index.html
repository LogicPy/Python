
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot</title>

<style type="text/css">

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box; /* ensures padding and borders do not increase element sizes */
}

#chatLog {
    width: 100%;
    max-width: 100%;
    height: 50vh; /* or whatever height you prefer */
}

@media only screen and (max-width: 568px) {
    #chatLog {
    padding: 5%;
    width: 100% !important;
    max-width: 100%;
    height: 50vh; /* or whatever height you prefer */
    }
}

img {
    max-width: 100%;
    height: auto;
}


.bot-response code {
    display: block;  /* Makes the code block display as a block element */
    background-color: black;
    color: white;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;  /* Gives a monospace font */
    overflow-x: auto;  /* Adds a scrollbar if the code is too long */
}

</style>

</head>
<body>
        <!-- Hidden field for user status -->

    <div>
        <div id="chatLog" rows="10" cols="50" disabled></div>
        <br>
        <input type="hidden" id="userStatus" value="unregistered">
        <input type="text" id="userInput" placeholder="Type a message...">
        <button onclick="sendMessage()">Send</button>
        <button onclick="userLoggedIn()">Register Me!</button>

    </div>

    <script>

const messageContent = data.reply.choices[0].message.content;
const formattedResponse = "Bot: <code>" + messageContent + "</code>";

function sendMessage() {
    const userInput = document.getElementById("userInput").value;
    const userStatus = document.getElementById("userStatus").value;
    fetch('/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ "message": userInput, "status": userStatus })  
    })
    .then(response => response.json())
    .then(data => {
    let messageContent;
    if (data.reply.choices) {
        messageContent = data.reply.choices[0].message.content;
    } else {
        messageContent = data.reply;
    }

    // Remove any newline characters from messageContent
    messageContent = messageContent.replace(/\n/g, ' ');
    messageContent = messageContent.trim();

    // Update the UI with the message
    chatLog.innerHTML += "<span class='bot-response'>Bot: " + messageContent + "</span><br>";
});
}


// This function is just an example; you'll use something like this when a user logs in.
function userLoggedIn() {
    document.getElementById("userStatus").value = "registered";
    console.log('User is now registered!');

}
    </script>

</body>
</html>