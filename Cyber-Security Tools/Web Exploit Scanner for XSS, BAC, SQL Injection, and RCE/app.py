from flask import Flask, render_template, send_from_directory
import os

app = Flask(__name__)

# Define file paths
LOG_FILE_PATH = 'vulnerability_scanner.log'
SUMMARY_FILE_PATH = 'vulnerability_summary.txt'


@app.route('/')
def home():
    # Load the summary data
    summary_data = ''
    if os.path.exists(SUMMARY_FILE_PATH):
        with open(SUMMARY_FILE_PATH, 'r') as f:
            summary_data = f.read()
    else:
        summary_data = "No scan summary available. Run a scan to generate data."

    return render_template('index.html', summary=summary_data)


@app.route('/log')
def view_log():
    # Load the log data
    log_data = ''
    if os.path.exists(LOG_FILE_PATH):
        with open(LOG_FILE_PATH, 'r') as f:
            log_data = f.read()
    else:
        log_data = "No log data available."

    return render_template('log.html', log=log_data)


if __name__ == "__main__":
    app.run(debug=True)
