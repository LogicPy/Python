<!DOCTYPE html>
<html>
<head>
    <title>AI Vulnerability Scanner</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>
<body>
    <h2>AI Vulnerability Scanner</h2>
    <p class="output"></p>
    <!-- Form for '/predict' endpoint -->
    <form action="http://localhost:5000/predict" method="post">
        <label for="inputText">Enter Text for Prediction:</label><br>
        <textarea id="inputText" name="text" rows="4" cols="50"></textarea><br>
        <input type="submit" value="Predict">
    </form>

    <!-- Form for '/scan' endpoint -->
    <form action="http://localhost:5000/scan" method="post">
        <label for="scanText">Enter Text for Scanning:</label><br>
        <textarea id="scanText" name="text" rows="4" cols="50"></textarea><br>
        <input type="submit" value="Scan">
    </form>
</body>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const forms = document.querySelectorAll('form');

            forms.forEach(form => {
                form.addEventListener('submit', function(event) {
                    event.preventDefault();

                    const endpoint = this.action;
                    const formData = new FormData(this);
                    const jsonData = {};

                    formData.forEach((value, key) => { jsonData[key] = value; });

                    fetch(endpoint, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(jsonData)
                    })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        $('.output').text(data);

                        // You can process the response here
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
                });
            });
        });
    </script>

</html>
